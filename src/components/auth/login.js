import '../../assets/login.css'; 
import { TextField,InputAdornment ,FormControl,InputLabel,IconButton,Icon,FilledInput} from '@material-ui/core'; // Import from @mui/material
import React,{useState} from 'react';
import { useNavigate } from 'react-router-dom';
import { useLogin } from '../../hooks/auth';
import { Alert } from 'reactstrap';

export function Login() {
  const navigate = useNavigate()
  
  //react query hook
  const signIn = useLogin()
  
  const [showPassword, setShowPassword] = useState(false);
  const [email,setEmail]=useState('')
  const [password,setPassword]=useState('')
  
  const handleClickShowPassword = () => setShowPassword((show) => !show);
  
  const handleClick = async() => {

    try {
    const loggedIn = await signIn.mutateAsync({ email, password })
    if (loggedIn)
    {
      localStorage.setItem('token', loggedIn?.data?.token);
      navigate('/home');
    }
  }catch (error) {
    console.error('API call error:', error);
  }

  };
  
  return(
    <div className="login-page">
    
    <div className="background-color"></div> 
    <div className="background-image"></div> 
    
    <div className="login-container">
    
    <center>
    <svg width="155" height="124" viewBox="0 0 155 124" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="Group">
    <path id="Vector" d="M18.0406 108.241C18.0406 94.6582 18.0406 81.7255 18.0406 68.7928C18.0406 65.4204 18.1025 62.0171 18.0097 58.6447C17.9478 56.0458 18.9997 54.4679 21.413 53.2612C29.2716 49.4247 37.0374 45.3717 45.3292 41.133V26.282C45.3292 24.8897 45.3911 23.4975 45.3292 22.1361C45.2055 20.0323 46.1646 18.64 47.8663 17.588C56.8696 12.0189 65.904 6.48077 74.8455 0.787907C76.9494 -0.542489 78.4963 -0.0165185 80.2908 1.0973C86.2621 4.84098 92.2953 8.55371 98.2976 12.2974C100.773 13.8444 103.155 15.546 105.754 16.8455C108.631 18.2996 109.467 20.4654 109.436 23.5594C109.312 34.7904 109.405 46.0214 109.405 57.2524C109.405 58.1806 109.405 59.0779 109.405 60.0679C111.942 62.048 114.819 63.1309 117.511 64.5541C122.678 67.2768 127.907 69.8757 133.166 72.4437C135.642 73.6503 136.755 75.3211 136.693 78.2603C136.508 86.5521 136.632 94.8748 136.632 103.198C136.632 104.714 136.632 106.23 136.632 108.241C141.334 108.241 145.759 108.241 150.152 108.241C151.39 108.241 152.627 108.117 153.71 108.921C154.484 109.509 155.01 110.345 154.917 111.273C154.793 112.387 154.081 113.284 152.875 113.469C151.947 113.562 151.049 113.593 150.121 113.562C101.794 113.562 53.4354 113.562 5.10792 113.562C4.17974 113.624 3.25156 113.593 2.35431 113.5C1.05485 113.284 0.0647909 112.665 0.00291201 111.118C-0.0589669 109.385 0.869217 108.519 2.41619 108.333C3.77753 108.148 5.1698 108.241 6.56208 108.241C10.182 108.21 13.8329 108.241 18.0406 108.241ZM45.0508 108.086V46.9805L23.455 58.1497V108.086H45.0508ZM131.155 77.3012L109.405 66.2867V107.931H131.155V77.3012ZM79.7339 37.7296C79.7339 40.0191 79.8577 41.4114 79.703 42.7728C79.3626 45.8358 80.2908 47.7849 83.1991 49.4247C89.3251 52.859 95.1727 56.8193 101.144 60.532C101.979 61.058 102.753 61.9862 104.083 61.5839V52.859L79.7339 37.7296ZM79.7339 53.1684C79.7339 55.9839 79.8886 57.9331 79.703 59.8823C79.4555 62.079 80.5074 63.1928 82.24 64.2447C89.0467 68.3597 95.7606 72.6293 102.505 76.8062C102.969 77.0846 103.464 77.6106 104.238 76.8062C104.238 74.857 104.176 72.7221 104.269 70.5873C104.331 69.0404 103.774 68.0193 102.413 67.2149C95.1108 62.7596 87.871 58.2115 79.7339 53.1684ZM104.238 93.2041C104.238 90.698 104.021 88.9963 104.269 87.3565C104.702 84.6029 103.31 83.2106 101.113 81.8802C94.8014 78.1056 88.6445 74.1144 82.3947 70.2161C81.6522 69.752 80.9715 68.9166 79.7339 69.9067C79.7339 71.3918 79.8886 73.0934 79.703 74.7332C79.3936 77.2703 80.5693 78.7553 82.6422 79.931C85.0246 81.2924 87.3141 82.8394 89.6655 84.2626C94.3683 87.1709 99.0401 90.0482 104.238 93.2041ZM80.1671 7.65647C78.3726 13.9062 80.4146 17.9902 86.2003 20.2798C87.4688 20.7748 88.5517 21.7339 89.7273 22.4455C94.3992 25.3538 99.0711 28.2312 103.836 31.1705C104.547 29.2522 104.052 27.5505 104.238 25.9417C104.578 23.219 103.65 21.4864 101.113 20.0323C95.1418 16.598 89.387 12.7924 83.5395 9.14156C82.5494 8.55371 81.6212 7.65647 80.1671 7.65647ZM103.99 99.1135L80.5074 84.6029C80.5383 87.9444 79.1151 91.0693 80.5383 93.5754C81.7759 95.7721 84.777 96.3908 86.8809 97.9378C87.376 98.3091 87.9019 98.6185 88.4279 98.9279C93.471 102.022 98.5142 105.116 104.021 108.457L103.99 99.1135ZM80.2599 32.0677L103.99 46.7639C104.238 43.175 104.331 40.2976 103.99 37.3583L80.2599 22.6621V32.0677ZM93.5948 108.055L79.7339 99.5467C79.9195 102.888 79.3008 105.456 80.2289 108.055H93.5948ZM61.2631 25.1373C60.1802 25.1373 59.1282 25.1063 58.0453 25.1373C56.6221 25.1682 55.5702 25.8798 55.5702 27.2721C55.5392 28.6644 56.5603 29.4688 57.9525 29.5307C60.242 29.5925 62.5316 29.5925 64.852 29.5616C66.2443 29.5307 67.2653 28.85 67.2962 27.3958C67.3272 25.9107 66.3371 25.2301 64.9139 25.1682C63.7073 25.1063 62.5006 25.1373 61.2631 25.1373ZM61.5724 39.6788V39.7097C62.7791 39.7097 64.0167 39.7716 65.2233 39.6788C66.399 39.586 67.2034 38.9363 67.3272 37.6677C67.5128 36.6158 66.7703 35.5948 65.7183 35.4401C65.6564 35.4401 65.5946 35.4092 65.5327 35.4092C62.81 35.2235 60.0564 35.2545 57.3028 35.471C56.2509 35.5948 55.4774 36.5539 55.6011 37.6059C55.6011 37.6677 55.6321 37.7296 55.6321 37.8224C55.7558 38.7816 56.4984 39.5241 57.4575 39.6169C58.8188 39.7716 60.1802 39.6788 61.5724 39.6788ZM61.6962 60.0679C63.0575 60.0679 64.4189 60.1298 65.7802 60.037C66.8012 59.9442 67.3272 59.2016 67.3891 58.1497C67.4509 57.1287 67.0487 56.2314 66.0277 56.0458C63.1813 55.5508 60.3039 55.5507 57.4575 56.0148C56.3437 56.1695 55.5702 57.1596 55.7249 58.2734C55.7249 58.3044 55.7249 58.3044 55.7249 58.3353C55.8486 59.2944 56.6221 60.006 57.5812 60.037C58.9735 60.1298 60.3349 60.0679 61.6962 60.0679ZM61.5106 70.247V70.3089C62.8719 70.3089 64.2332 70.3398 65.5946 70.3089C66.6156 70.2779 67.2962 69.721 67.3891 68.6381C67.4819 67.6481 67.1415 66.658 66.1824 66.4414C63.0885 65.6989 59.9017 65.4823 56.8696 66.6271C55.9724 66.9674 55.5083 67.9575 55.7868 68.8857C56.0033 69.5973 56.5602 70.247 57.4266 70.2779C58.7879 70.3089 60.1492 70.247 61.5106 70.247ZM66.8322 86.7996C64.0476 86.7996 61.3249 86.8306 58.6332 86.7996C57.3028 86.7687 56.0652 87.109 55.8796 88.5632C55.6939 90.2339 56.9625 91.0383 58.4166 91.1311C60.6752 91.3168 62.9647 91.2858 65.2233 91.1002C67.42 90.8527 67.915 89.4295 66.8322 86.7996ZM66.9868 97.2571C64.1095 96.6693 61.3868 97.0096 58.6951 96.9478C57.3956 96.9168 56.0962 97.2571 55.9105 98.7113C55.7249 100.32 56.9006 101.248 58.4166 101.31C60.6752 101.465 62.9647 101.434 65.2233 101.279C67.4819 101.094 67.8841 99.6395 66.9868 97.2571ZM55.6011 48.2181C55.8486 48.5275 56.1271 49.3319 56.5603 49.4557C59.7161 50.322 62.9338 49.9816 66.1205 49.6723C66.894 49.6104 67.2962 48.775 67.3581 47.9396C67.4509 46.7949 66.7703 46.1761 65.8421 45.9286C63.0266 45.186 60.0564 45.186 57.2409 45.9286C56.3437 46.1452 55.7249 46.9186 55.6011 48.2181ZM66.894 76.6515C63.7382 76.6515 60.7061 76.6205 57.6431 76.6515C56.5603 76.6515 55.9415 77.4249 55.7868 78.3531C55.6321 79.3741 56.2509 80.1167 57.21 80.4261C60.0564 81.3543 62.9647 81.2305 65.8111 80.5498C67.6675 80.1476 67.6985 78.7863 66.894 76.6515Z" fill="#324B7E"/>
    <path id="Vector_2" d="M77.5064 123.989C64.2643 123.989 51.0222 123.989 37.7801 123.989C36.5426 123.989 35.305 123.989 34.0983 123.896C32.8298 123.803 32.1801 122.968 32.1182 121.73C32.0254 120.307 32.7061 119.348 34.1602 119.162C35.0884 119.069 36.0166 119.039 36.9138 119.069C63.8621 119.069 90.8104 119.069 117.759 119.069C118.842 119.039 119.924 119.1 120.976 119.255C122.183 119.472 122.802 120.431 122.802 121.607C122.802 122.782 122.152 123.71 120.914 123.865C119.677 123.989 118.47 124.02 117.233 123.989C103.991 123.989 90.7485 123.989 77.5064 123.989Z" fill="white"/>
    <path id="Vector_3" d="M36.8518 79.4669C36.8518 72.8459 36.8518 66.2248 36.8518 59.6347C36.8518 58.7066 36.8209 57.7784 36.8828 56.8811C36.9446 55.8601 37.4706 55.1176 38.5225 55.0557C39.822 54.9938 40.5027 55.7673 40.5955 57.0049C40.6574 57.7784 40.5955 58.5519 40.5955 59.3253C40.5955 73.0315 40.5955 86.7068 40.5955 100.413C40.5955 101.496 40.6574 102.579 40.4099 103.631C40.1933 104.404 39.4507 104.899 38.6463 104.837C37.78 104.806 37.1303 104.373 37.0065 103.538C36.8828 102.486 36.8209 101.403 36.8518 100.32C36.8209 93.3278 36.8209 86.3974 36.8518 79.4669Z" fill="white"/>
    <path id="Vector_4" d="M28.4053 84.1387C28.4053 78.6005 28.4053 73.0933 28.4053 67.5552C28.4053 66.4723 28.4362 65.4203 28.5909 64.3375C28.6528 63.533 29.3335 62.9142 30.1379 62.9452C30.9423 62.8524 31.6849 63.3783 31.8705 64.1518C32.0871 65.2038 32.1799 66.2557 32.1799 67.3076C32.2108 78.353 32.2108 89.3984 32.1799 100.444C32.2108 101.496 32.0871 102.579 31.8705 103.6C31.6849 104.373 30.9114 104.899 30.1069 104.806C29.3335 104.713 28.6219 104.311 28.529 103.414C28.4362 102.362 28.4053 101.279 28.4053 100.196C28.4053 94.8747 28.4053 89.4912 28.4053 84.1387Z" fill="white"/>
    <path id="Vector_5" d="M114.262 104.466C114.262 94.1631 114.045 84.1078 114.417 74.1763C116.706 73.4028 117.913 73.9287 118.006 75.9398C118.129 78.0746 118.037 80.2404 118.037 82.4062C118.037 88.7178 118.037 94.9985 118.037 101.31C118.037 103.29 117.851 105.085 114.262 104.466Z" fill="white"/>
    <path id="Vector_6" d="M122.678 93.1422C122.678 90.2339 122.709 87.3256 122.678 84.4482C122.678 83.1178 122.894 81.8183 124.41 81.7255C125.864 81.6327 126.514 82.7156 126.483 84.1388C126.483 90.2339 126.483 96.3599 126.452 102.455C126.452 103.847 125.772 104.868 124.256 104.714C122.894 104.59 122.74 103.414 122.74 102.3C122.709 99.2682 122.709 96.2052 122.678 93.1422Z" fill="white"/>
    </g>
    </svg>
    <h6 className='logoHeading'>Explore & Connect</h6>
    </center>


    {signIn.isError && <Alert color='danger' className='my-4'>Error: {signIn.error.response.data.error}</Alert>}
    
    <TextField
    label="Email"
    name={email}
    value={email}
    onChange={(e)=>{setEmail(e.target.value)}}
    id="filled-start-adornment"
    className='m-2'
    InputProps={{
      startAdornment: <InputAdornment position="start"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 35 25" fill="none">
      <g clip-path="url(#clip0_46_22)">
      <path d="M34.9999 22.3607C34.9177 22.5982 34.8346 22.8348 34.7533 23.0722C34.7058 23.2105 34.6383 23.229 34.5396 23.1177C34.494 23.0657 34.4428 23.0194 34.3944 22.9702C31.0494 19.5628 27.7062 16.1536 24.3548 12.7537C24.153 12.5487 24.1548 12.4503 24.3548 12.2462C27.7062 8.84629 31.0494 5.43707 34.3944 2.02971C34.6967 1.72172 34.7013 1.72358 34.8428 2.15216C34.8967 2.31451 34.9469 2.47685 34.999 2.63919C34.9999 9.21365 34.9999 15.7872 34.9999 22.3607Z" fill="#2B467D"/>
      <path d="M1.80176 0.300568C2.26201 0.0723589 2.70217 0 3.16424 0C7.5494 0.00371071 11.9346 0.00185536 16.3188 0.00185536C21.4893 0.00185536 26.6607 0.00278303 31.8312 0C32.3025 0 32.749 0.077925 33.2348 0.310772C32.7052 0.839549 32.2066 1.32844 31.718 1.8266C27.3018 6.32305 22.8874 10.8223 18.4721 15.3197C17.842 15.9607 17.1635 15.9626 16.5371 15.3252C11.6953 10.3937 6.85446 5.46124 2.01362 0.528777C1.9497 0.463839 1.89034 0.396119 1.80176 0.300568Z" fill="#2B467D"/>
      <path d="M33.1944 24.7088C32.7342 24.925 32.2949 25.0001 31.8337 25.0001C27.3691 24.9964 22.9045 24.9982 18.439 24.9982C13.3589 24.9982 8.27881 24.9973 3.19962 25.0001C2.72659 25.0001 2.27364 24.9352 1.84536 24.7199C1.84079 24.5854 1.94763 24.54 2.01338 24.4732C5.36572 21.0547 8.72262 17.6418 12.0677 14.2168C12.2905 13.9886 12.3918 14.0192 12.5918 14.2288C13.4237 15.1018 14.273 15.9571 15.1186 16.8161C16.5213 18.241 18.481 18.2401 19.8873 16.8133C20.7576 15.9302 21.627 15.0461 22.4881 14.1537C22.6333 14.0025 22.7109 13.995 22.8625 14.149C26.2687 17.6269 29.6795 21.0992 33.0894 24.5734C33.1204 24.6058 33.1451 24.6448 33.1944 24.7088Z" fill="#2B467D"/>
      <path d="M0.00275012 12.5004C0.00275012 9.38708 0.00457651 6.27472 1.05364e-05 3.16143C-0.000902658 2.78572 0.0721529 2.43042 0.184476 2.07512C0.271229 1.80146 0.347938 1.75322 0.570757 1.98328C2.11497 3.57332 3.67196 5.15038 5.2244 6.73207C7.03435 8.57536 8.84156 10.4224 10.6588 12.2582C10.8469 12.4484 10.8506 12.5468 10.6597 12.7397C7.30009 16.1508 3.94684 19.5693 0.59176 22.9859C0.31141 23.2716 0.30867 23.2716 0.176257 22.8922C0.0575418 22.5518 -0.000902658 22.2039 1.05364e-05 21.8402C0.00457651 18.7269 0.00275012 15.6137 0.00275012 12.5004Z" fill="#2B467D"/>
      </g>
      <defs>
      <clipPath id="clip0_46_22">
      <rect width="35" height="25" fill="white"/>
      </clipPath>
      </defs>
      </svg></InputAdornment>,
    }}
    variant="filled"
    />
    
    <FormControl className='m-2'
    variant="filled">
    <InputLabel htmlFor="filled-adornment-password">Password</InputLabel>
    <FilledInput
    id="filled-adornment-password"
    type={showPassword ? 'text' : 'password'}
    name={password}
    value={password}
    onChange={(e)=>{setPassword(e.target.value)}}
    endAdornment={
      <InputAdornment position="end">
      <IconButton
      aria-label="toggle password visibility"
      onClick={handleClickShowPassword}
      edge="end"
      >
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="17" viewBox="0 0 28 17" fill="none">
      <path d="M14 0C8.6503 0 3.79892 2.92687 0.219086 7.68088C-0.0730285 8.07037 -0.0730285 8.6145 0.219086 9.00399C3.79892 13.7637 8.6503 16.6906 14 16.6906C19.3497 16.6906 24.2011 13.7637 27.7809 9.00972C28.073 8.62023 28.073 8.0761 27.7809 7.68661C24.2011 2.92687 19.3497 0 14 0ZM14.3838 14.2219C10.8326 14.4453 7.89997 11.5185 8.12335 7.96154C8.30664 5.02895 10.6836 2.65194 13.6162 2.46865C17.1674 2.24527 20.1 5.17214 19.8766 8.72906C19.6876 11.6559 17.3106 14.0329 14.3838 14.2219ZM14.2062 11.507C12.2931 11.6273 10.7123 10.0522 10.8383 8.1391C10.9357 6.55825 12.2187 5.28097 13.7995 5.17787C15.7126 5.05758 17.2934 6.63271 17.1674 8.54577C17.0643 10.1324 15.7813 11.4096 14.2062 11.507Z" fill="#2B467D"/>
      </svg>
      </IconButton>
      </InputAdornment>
    }
    startAdornment={
      <InputAdornment position="start">
      <Icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="24" viewBox="0 0 22 30" fill="none">
      <g clip-path="url(#clip0_46_28)">
      <path d="M10.9941 30.0001C8.1799 30.0001 5.36719 30.0016 2.55299 30.0001C1.03153 29.9986 0 28.9379 0 27.3733C0 22.8682 0 18.3661 0.00147572 13.8625C0.00147572 12.325 1.04038 11.2614 2.53676 11.2584C2.81715 11.2584 3.09753 11.2418 3.37644 11.2629C3.61846 11.281 3.67454 11.189 3.67159 10.9536C3.65978 9.84768 3.67159 8.74026 3.66568 7.63434C3.64797 4.29246 5.24175 2.01123 8.15187 0.666931C11.1638 -0.724137 14.6288 0.116237 16.6372 2.70073C17.5847 3.91829 18.1941 5.31388 18.3609 6.88449C18.3992 7.25263 18.3653 7.61473 18.2295 7.95722C18.0141 8.50037 17.4046 8.84587 16.8734 8.74328C16.3229 8.63766 15.9082 8.12167 15.8905 7.51515C15.8463 5.96114 15.2855 4.64551 14.099 3.66331C12.6351 2.45329 10.9764 2.16512 9.22766 2.8682C7.48336 3.57128 6.43118 4.91708 6.18031 6.83169C5.99732 8.22728 6.14489 9.63947 6.10652 11.0426C6.10209 11.2206 6.17735 11.2704 6.33378 11.2584C6.42232 11.2508 6.51234 11.2569 6.60089 11.2569C10.8657 11.2569 15.1305 11.2569 19.3954 11.2569C20.9788 11.2569 21.9985 12.2964 21.9985 13.9107C22 18.3887 22 22.8652 21.9985 27.3432C21.9985 28.9575 20.9788 29.9986 19.3968 29.9986C16.5959 30.0001 13.795 30.0001 10.9941 30.0001ZM9.77663 21.886C9.77663 22.1847 9.7722 22.4835 9.77663 22.7822C9.78844 23.5471 10.2946 24.1084 10.9808 24.1235C11.6759 24.1386 12.2116 23.5622 12.2219 22.7807C12.2293 22.2225 12.2337 21.6627 12.2189 21.1045C12.213 20.8555 12.2809 20.6775 12.4506 20.4874C13.159 19.6953 13.125 18.4898 12.4019 17.7369C11.6774 16.9841 10.5086 16.9373 9.7058 17.6313C8.94432 18.2891 8.78642 19.5293 9.43721 20.3305C9.7176 20.676 9.81057 21.0049 9.77663 21.4183C9.7663 21.5737 9.77663 21.7306 9.77663 21.886Z" fill="#324B7E"/>
      </g>
      <defs>
      <clipPath id="clip0_46_28">
      <rect width="22" height="30" fill="white"/>
      </clipPath>
      </defs>
      </svg></Icon>
      </InputAdornment>
    } />
    </FormControl>
    
    
    <button  onClick={handleClick} className="login-btn mt-2">
    Login
    </button>
    
    </div>
    </div>
    )
  }
  